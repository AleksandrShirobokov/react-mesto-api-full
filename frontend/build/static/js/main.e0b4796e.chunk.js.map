{"version":3,"sources":["components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ImagePopup.js","utils/api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Login.js","images/UnionNeOK.svg","images/UnionOk.svg","components/InfoTooltip.js","components/Register.js","components/ProtectedRoute.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","className","exact","path","email","to","onClick","onSignOut","CurrentUserContext","React","createContext","Card","currentUser","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","src","link","alt","name","onCardClick","type","onCardDelete","onCardLike","length","Main","avatar","onEditAvatar","about","onEditProfile","onAddPlace","cards","map","Footer","PopupWithForm","onOverlayClose","isOpen","title","onSubmit","children","onClose","ImagePopup","api","options","this","_url","url","_headers","headers","res","ok","json","Promise","reject","status","fetch","method","then","_getResponseData","data","body","JSON","stringify","id","authorization","localStorage","getItem","EditProfilePopup","useState","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","value","placeholder","required","minLength","maxLength","onChange","target","EditAvatarPopup","avatarRef","useRef","current","onUpdateAvatar","ref","AddPlacePopup","placeName","setPlaceName","placeLink","setPlaceLink","onAddCard","Login","password","info","setInfo","handleChange","onLogin","InfoTooltip","onResponse","statusSuccess","statusUnsuccess","regSuccess","regUnsaccess","onMessage","Register","onRegister","ProtectedRoute","Component","component","loggedIn","BASE_URL","getResponse","App","setCards","setCurrentUser","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","isPopupImageOpen","setPopupImageOpen","isInfoTooltipOpen","setInfoTooltipOpen","setLoggedIn","setEmail","resSuccess","setResSuccess","message","setMessage","history","useHistory","handleLogin","closeAllPopups","handleOverlayClose","evt","currentTarget","token","getUserInfoMe","catch","err","console","log","getInitialCards","handleEscClose","key","document","addEventListener","removeEventListener","auth","push","checkToken","Provider","removeItem","changeLikeCardStatus","newCard","state","c","delCard","filter","setItem","updateToken","changeUserInfo","editAvatar","postNewCard","onSign","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e0b4796e.chunk.js","sourcesContent":["import React from 'react'\r\nimport { Route, Switch, Link } from 'react-router-dom'\r\n\r\nfunction Header(props) {\r\n    return (\r\n        <header className=\"header\">\r\n            <div className=\"header__wrapper\">\r\n            <div className=\"header__logo\"></div>\r\n            <Switch>\r\n                <Route exact path=\"/\">\r\n                    <div className=\"header__container\">\r\n                        <p className=\"header__email\">{props.email}</p>\r\n                        <Link to=\"sign-in\" className=\"header__link\" onClick={props.onSignOut}>Выйти</Link>\r\n                    </div>\r\n                </Route>\r\n\r\n                <Route path=\"/sign-in\">\r\n                    <Link to=\"sign-up\" className=\"header__link\">Зарегистрироваться</Link>\r\n                </Route>\r\n\r\n                <Route path=\"/sign-up\">\r\n                    <Link to=\"sign-in\" className=\"header__link\">Войти</Link>\r\n                </Route>\r\n            </Switch>\r\n            </div>\r\n        </header>    \r\n    )\r\n} \r\nexport default Header;","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react'\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\r\n\r\nfunction Card(props) {\r\n\r\n    const currentUser = React.useContext(CurrentUserContext)\r\n\r\n    // Определяем, являемся ли мы владельцем текущей карточки\r\n    const isOwn = props.card.owner === currentUser._id;\r\n    // Создаём переменную, которую после зададим в `className` для кнопки удаления\r\n    const cardDeleteButtonClassName = (`element__delete ${isOwn ? 'element__delete_visible' : 'element__delete_hidden'}`);\r\n    // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\r\n    const isLiked = props.card.likes.some(i => i === currentUser._id);\r\n    // Создаём переменную, которую после зададим в `className` для кнопки лайка\r\n    const cardLikeButtonClassName = `element__image-like ${isLiked && 'element__image-like_active'}`;\r\n\r\n    function handleClick() {\r\n        props.onCardClick(props.card);\r\n      }\r\n\r\n    function handleLike() {\r\n        props.onCardLike(props.card);\r\n    }\r\n\r\n    function handleDeleteClick() {\r\n        props.onCardDelete(props.card);\r\n    }\r\n    \r\n    return (\r\n        <div className=\"element\">\r\n            <img className=\"element__image\" src={props.card.link} alt={props.card.name} onClick={handleClick} />\r\n            <button type=\"button\" className={cardDeleteButtonClassName} onClick={handleDeleteClick}></button>\r\n            <div className=\"element__item\">\r\n                <h2 className=\"element__title\">{props.card.name}</h2>\r\n                <div className=\"element__wrapper\">\r\n                    <button className={cardLikeButtonClassName} onClick={handleLike} type=\"button\"></button>\r\n                    <p className=\"element__image-like-number\">{props.card.likes.length}</p>\r\n                </div>\r\n            </div>\r\n        </div>   \r\n    )\r\n} \r\n\r\nexport default Card;","import React from 'react'\r\nimport Card from './Card'\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\r\n\r\nfunction Main(props) {\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    \r\n    return (\r\n        <main className=\"content\">\r\n            <section className=\"profile\">\r\n                <div className=\"profile__items\">\r\n                    <div className=\"profile__wrapper\">\r\n                        <img className=\"profile__image\" src={currentUser.avatar} alt={currentUser.name} />\r\n                        <button className=\"profile__cursor\" onClick={props.onEditAvatar}></button>\r\n                    </div>\r\n                    <div className=\"profile__info\">\r\n                        <h1 className=\"profile__title\">{currentUser.name}</h1>\r\n                        <p className=\"profile__subtitle\">{currentUser.about}</p>\r\n                        <button className=\"profile__button-edit\" type=\"button\" onClick={props.onEditProfile}></button>\r\n                    </div>\r\n                </div>    \r\n                <button className=\"profile__button-add\" type=\"button\" onClick={props.onAddPlace}></button>\r\n            </section>\r\n\r\n            <section className=\"elements\">\r\n                    {props.cards.map(card => (                    \r\n                        <Card \r\n                        onCardClick={props.onCardClick}\r\n                        card={card}\r\n                        key={card._id}\r\n                        onCardLike={props.onCardLike}\r\n                        onCardDelete={props.onCardDelete}\r\n                        />))}\r\n\r\n            </section>\r\n\r\n        </main>    \r\n\r\n    )\r\n} \r\nexport default Main;","import React from 'react'\r\n\r\nfunction Footer() {\r\n    return (\r\n        <footer className=\"footer\">\r\n            <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n        </footer>     \r\n    )\r\n} \r\nexport default Footer;","import React from 'react'\r\n\r\nfunction PopupWithForm(props) {\r\n    return (\r\n        <section onClick={props.onOverlayClose} className={`popup popup_type_${props.name} ${props.isOpen && 'popup_opened'}`}>\r\n            <div className=\"popup__container\">\r\n                <h2 className={`popup__${props.title}`}>{props.title}</h2>\r\n                <form className=\"popup__form\" name={props.name} onSubmit={props.onSubmit}>\r\n                    {props.children}\r\n                    <button className=\"popup__save popup__button\">Сохранить</button>\r\n                    <button onClick={props.onClose} className={`popup__close popup__close_${props.name}`} type=\"button\"></button>\r\n                </form>\r\n            </div>\r\n\r\n        </section>\r\n    )\r\n} \r\nexport default PopupWithForm;","import React from 'react'\r\n\r\nfunction ImagePopup(props) {\r\n    return (\r\n        <section onClick={props.onOverlayClose} className={`popup popup_type_image ${props.isOpen && 'popup_opened'}`}>\r\n            <div className=\"popup__wrapper\">\r\n                    <button className=\"popup__close popup__close_image\" onClick={props.onClose} type=\"button\"></button>\r\n                    <img className=\"popup__image\" src={props.card.link}  alt={props.card.name}/>\r\n                    <h2 className=\"popup__subtitle\">{props.card.name}</h2>\r\n            </div>\r\n        </section>     \r\n    )\r\n} \r\nexport default ImagePopup;","class Api {\r\n    constructor(options) {\r\n        this._url = options.url;\r\n        this._headers = options.headers;\r\n    }\r\n\r\n    _getResponseData(res) {\r\n        if(!res.ok) {\r\n            return Promise.reject(`Ошибка:${res.status}`);\r\n        }\r\n            return res.json();  \r\n    }\r\n\r\n    getInitialCards() {\r\n        return fetch(`${this._url}/cards`, {\r\n            method:\"GET\",\r\n            headers: this._headers,\r\n        })\r\n        .then(this._getResponseData)\r\n    }\r\n\r\n    postNewCard(data) {\r\n        return fetch(`${this._url}/cards`, {\r\n            method:'POST',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                name: data.name,\r\n                link: data.link\r\n            })\r\n        })\r\n        .then(this._getResponseData)\r\n    }\r\n\r\n    getUserInfoMe() {\r\n        return fetch(`${this._url}/users/me`, {\r\n            headers: this._headers,\r\n        })\r\n        .then(this._getResponseData)\r\n    }\r\n\r\n\r\n    changeUserInfo(data) {\r\n        return fetch(`${this._url}/users/me`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                name: data.name,\r\n                about: data.about\r\n            })\r\n        })\r\n        .then(this._getResponseData)\r\n    }    \r\n\r\n    editAvatar(data) {\r\n        return fetch(`${this._url}/users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body:JSON.stringify({\r\n                avatar: data.link\r\n            })\r\n        })\r\n        .then(this._getResponseData)\r\n\r\n    }\r\n\r\n    changeLikeCardStatus(id, isLiked) {\r\n        if(isLiked)\r\n            {return fetch(`${this._url}/cards/${id}/likes`, {\r\n                method:'PUT',\r\n            headers: this._headers,\r\n            })\r\n            .then(this._getResponseData)}\r\n        else {\r\n            return fetch(`${this._url}/cards/${id}/likes`, {\r\n                method: 'DELETE',\r\n                headers: this._headers,\r\n            })\r\n            .then(this._getResponseData)\r\n        }    \r\n    }\r\n\r\n    delCard(id) {\r\n        return fetch(`${this._url}/cards/${id}`, {\r\n            method:'DELETE',\r\n            headers: this._headers,\r\n        })\r\n        .then(this._getResponseData)\r\n\r\n    }\r\n\r\n    updateToken() {\r\n        this._headers = {\r\n            \"Content-type\":\"application/json\",\r\n            authorization : `Bearer ${localStorage.getItem('token')}`\r\n        } \r\n    }\r\n}    \r\n\r\nconst api = new Api({\r\n    url:\"https://api.krasavchik.students.nomoredomains.monster\", // localhost:3000\r\n    /* url:\"http://localhost:3000\", */\r\n    headers: {\r\n        /* Accept: \"application/json\", */\r\n        \"Content-type\":\"application/json\",\r\n        authorization: `Bearer ${localStorage.getItem('token')}}`\r\n    } \r\n}) \r\n\r\nexport default api;","import React from 'react'\r\nimport PopupWithForm from './PopupWithForm'\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\r\n\r\nfunction EditProfilePopup(props) {\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const [name, setName] = React.useState(currentUser.name);\r\n    const [description, setDescription] = React.useState(currentUser.about);\r\n\r\n    React.useEffect(() => {\r\n        setName(currentUser.name);\r\n        setDescription(currentUser.about);\r\n      }, [currentUser]);\r\n\r\n    function handleChangeName(e) {\r\n        setName(e.target.value);\r\n    }\r\n\r\n    function handleChangeDescription(e) {\r\n        setDescription(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        // Запрещаем браузеру переходить по адресу формы\r\n        e.preventDefault();\r\n\r\n        // Передаём значения управляемых компонентов во внешний обработчик\r\n        props.onUpdateUser({\r\n            name,\r\n            about: description,\r\n        });\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm name=\"edit\" title=\"Редактировать профиль\" isOpen={props.isOpen} onOverlayClose={props.onOverlayClose} onClose={props.onClose} onSubmit={handleSubmit} children={(\r\n        <>\r\n            <input value={name || ''} type=\"text\" className=\"popup__input popup__input_type_name\" id=\"user-name\" name=\"name\" placeholder=\"Имя\" required minLength=\"2\" maxLength=\"40\" onChange={handleChangeName} />\r\n            <span id=\"user-name-error\" className=\"error\"></span>\r\n            <input value={description || ''} type=\"text\" className=\"popup__input popup__input_type_job\"  id=\"user-about\"     name=\"about\"  placeholder=\"Вид деятельности\" required minLength=\"2\" maxLength=\"200\" onChange={handleChangeDescription} />\r\n            <span id=\"about-error\" className=\"error\"></span>\r\n        </>\r\n        )}>\r\n        </PopupWithForm> \r\n    )\r\n} \r\nexport default EditProfilePopup;","import React from 'react'\r\nimport PopupWithForm from './PopupWithForm'\r\n\r\nfunction EditAvatarPopup(props) {\r\n\r\n    const avatarRef = React.useRef()\r\n\r\n    React.useEffect(() => {\r\n        avatarRef.current.value=''\r\n    }, [props.isOpen])\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        props.onUpdateAvatar({\r\n          link: avatarRef.current.value\r\n        });\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm name=\"profile\" title=\"Обновить аватар\" isOpen={props.isOpen} onClose={props.onClose} onOverlayClose={props.onOverlayClose} onSubmit={handleSubmit} children={(\r\n        <>\r\n            <input className=\"popup__input popup__input_type_link\" type=\"url\" id=\"avatar-link\" placeholder=\"Ссылка на картинку\" name=\"link\" required ref={avatarRef} />\r\n            <span id=\"avatar-link-error\" className=\"error\"></span> \r\n        </>\r\n        )}>\r\n        </PopupWithForm> \r\n    )\r\n} \r\nexport default EditAvatarPopup;\r\n\r\n\r\n","import React from 'react'\r\nimport PopupWithForm from './PopupWithForm'\r\n\r\nfunction AddPlacePopup(props) {\r\n\r\n    const [placeName, setPlaceName] = React.useState('')\r\n    const [placeLink, setPlaceLink] = React.useState('')\r\n\r\n    React.useEffect(() => {\r\n        setPlaceName('')\r\n        setPlaceLink('')\r\n    }, [props.isOpen])\r\n\r\n    function dischargeNameInput(e) {\r\n        setPlaceName(e.target.value)\r\n    }\r\n\r\n    function dischargeLinkInput(e) {\r\n        setPlaceLink(e.target.value)\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault()\r\n        props.onAddCard({\r\n            name:placeName,\r\n            link:placeLink\r\n        })\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm name=\"new-card\" title=\"Новое место\" isOpen={props.isOpen} onClose={props.onClose} onOverlayClose={props.onOverlayClose} onSubmit={handleSubmit} children={(\r\n        <>\r\n            <input value={placeName} onChange={dischargeNameInput} className=\"popup__input popup__input_type_title\" id=\"name-card\" placeholder=\"Название\" name=\"name\" minLength=\"2\" maxLength=\"30\" required />\r\n            <span id=\"name-card-error\" className=\"error\"></span>\r\n            <input value={placeLink} onChange={dischargeLinkInput} className=\"popup__input popup__input_type_link\" type=\"url\" id=\"link\" placeholder=\"Ссылка на картинку\" name=\"link\" required />\r\n            <span id=\"link-error\" className=\"error\"></span> \r\n        </>\r\n        )}>\r\n        </PopupWithForm> \r\n    )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react'\r\n\r\nfunction Login(props) {\r\n    const [info, setInfo] = React.useState({\r\n        password:'',\r\n        email:''\r\n    })\r\n\r\n    function handleChange(e) {\r\n        const {name, value} = e.target;\r\n        setInfo({\r\n            ...info,\r\n            [name]: value\r\n        });\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        const {password, email} = info;\r\n        if(!password || !email) {\r\n            return\r\n        }\r\n        props.onLogin(password, email)\r\n    }\r\n\r\n        return(\r\n          <div className=\"login\">\r\n            <p className=\"login__enter\">\r\n              Вход\r\n            </p>\r\n            <form onSubmit={handleSubmit} className=\"login__form\">\r\n                \r\n                <input \r\n                className=\"login__input login__input_type_username\" \r\n                placeholder=\"Email\" \r\n                required \r\n                id=\"email\" \r\n                name=\"email\" \r\n                type=\"text\" \r\n                value={info.email} \r\n                onChange={handleChange} />\r\n                \r\n                <input \r\n                className=\"login__input login__input_type_password\" \r\n                placeholder=\"Пароль\" \r\n                required \r\n                id=\"password\" \r\n                name=\"password\" \r\n                type=\"password\" \r\n                value={info.password} \r\n                onChange={handleChange} />\r\n                \r\n                <button type=\"submit\" className=\"login__link login__button\">Войти</button>  \r\n            </form>\r\n          </div>\r\n        )\r\n}\r\nexport default Login;","export default __webpack_public_path__ + \"static/media/UnionNeOK.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/UnionOk.df8eddf6.svg\";","import React from 'react'\r\nimport statusSuccess from '../images/UnionNeOK.svg';\r\nimport statusUnsuccess from '../images/UnionOk.svg'\r\nfunction InfoTooltip(props) {\r\n    return (\r\n        <section onClick={props.onOverlayClose} className={`popup ${props.isOpen && 'popup_opened'}`}>\r\n            <div className=\"popup__container-response\">\r\n                        <img className='popup__sign-image' src={`${props.onResponse ? statusSuccess : statusUnsuccess}`} alt={`${props.onResponse ? props.regSuccess : props.regUnsaccess}`} />\r\n                        <h2 className={`popup__title popup__title_type_response`}>{`${props.onResponse ? props.regSuccess : props.regUnsaccess}`}</h2>\r\n                        <p>{props.onMessage}</p>                 \r\n                <button onClick={props.onClose} className={`popup__close`} type=\"button\"></button>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\nexport default InfoTooltip;","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nfunction Register(props) {\r\n\r\n    const [info, setInfo] = React.useState({\r\n        password:'',\r\n        email:'',\r\n    })\r\n\r\n    function handleChange(e) {\r\n        const {name, value} = e.target;\r\n        setInfo({\r\n            ...info,\r\n            [name]: value\r\n        });\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        const { password, email } = info;\r\n        props.onRegister(password, email);\r\n    }\r\n\r\n        return(\r\n          <div className=\"register\">\r\n            <p className=\"register__enter\">\r\n              Регистрация\r\n            </p>\r\n            <form onSubmit={handleSubmit} className=\"register__form\">\r\n                \r\n                <input \r\n                className=\"register__input register__input_type_username\" \r\n                placeholder=\"Email\" \r\n                required id=\"email\" \r\n                name=\"email\" \r\n                type=\"email\" \r\n                value={info.email || ''} \r\n                onChange={handleChange} />\r\n                \r\n                <input \r\n                className=\"register__input register__input_type_password\" \r\n                placeholder=\"Пароль\" \r\n                required id=\"password\" \r\n                name=\"password\" \r\n                type=\"password\" \r\n                value={info.password || ''} \r\n                onChange={handleChange} />\r\n                \r\n                <button type=\"submit\" className=\"register__link register__button\">Зарегистрироваться</button>  \r\n            </form>\r\n            <div className=\"register__signin\">\r\n                <p>Уже зарегистрированы?</p>\r\n                <Link to=\"sign-in\" className=\"register__login-link\">Войти</Link>\r\n            </div>\r\n          </div>\r\n        )\r\n    \r\n\r\n}\r\n\r\nexport default Register;","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom'\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n    return ( \r\n        <Route>\r\n            {() => \r\n            props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\r\n            }\r\n        </Route>\r\n    )\r\n}\r\nexport default ProtectedRoute;","\r\nimport api from \"../utils/api\";\r\n\r\n//  localhost:3000\r\n/* export const BASE_URL = 'http://localhost:3000'; */\r\nexport const BASE_URL = 'https://api.krasavchik.students.nomoredomains.monster'; //  localhost:3000\r\n\r\n const getResponse = (res) => {\r\n    if(!res.ok) {\r\n        return Promise.reject(res.status);\r\n    }\r\n    return res.json();\r\n}\r\n\r\nexport const register = (password, email) => {\r\n    return fetch(`${BASE_URL}/signup`, {\r\n        method: 'POST',\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({password, email})\r\n    })\r\n    .then(getResponse)\r\n}\r\n\r\nexport const authorize = (password, email) => {\r\n    return fetch(`${BASE_URL}/signin`, {\r\n        method: 'POST',\r\n        headers: {\r\n            \"Content-Type\": \"application/json\" \r\n        },\r\n        body: JSON.stringify({password, email})\r\n    })\r\n    .then(getResponse)\r\n    .then((data) => {\r\n        if(data.token) {   \r\n            localStorage.setItem('token', data.token);\r\n            api.updateToken(); \r\n            return data;\r\n        }\r\n    })\r\n}\r\n\r\nexport const getContent = (token) => {\r\n    return fetch(`${BASE_URL}/users/me`, {\r\n        method: 'GET',\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            authorization : `Bearer ${token}`\r\n        }\r\n    })\r\n    .then((res) => res.json())\r\n}","import React from 'react'\nimport Header from './Header' \nimport Main from './Main'\nimport Footer from './Footer'\nimport PopupWithForm from './PopupWithForm'\nimport ImagePopup from './ImagePopup'\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\nimport api from '../utils/api'\nimport EditProfilePopup from './EditProfilePopup'\nimport EditAvatarPopup from './EditAvatarPopup'\nimport AddPlacePopup from './AddPlacePopup'\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom'\nimport Login from './Login'\nimport InfoTooltip from './InfoTooltip'\nimport Register from './Register'\nimport ProtectedRoute from './ProtectedRoute'\nimport * as auth from '../utils/auth'\n\nfunction App() {\n\n    const [cards, setCards] = React.useState([]) \n    const [currentUser, setCurrentUser] = React.useState({});\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false); \n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false); \n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false); \n    const [selectedCard, setSelectedCard] = React.useState({});\n    const [isPopupImageOpen, setPopupImageOpen] = React.useState(false);\n    const [isInfoTooltipOpen, setInfoTooltipOpen] = React.useState(false);\n    const [loggedIn, setLoggedIn] = React.useState(false);\n    const [email, setEmail] = React.useState('');\n    const [resSuccess, setResSuccess] = React.useState(false)\n    const [message, setMessage] = React.useState('');\n\n    const history = useHistory();\n\n    React.useEffect(() => {\n        if(loggedIn) {\n            const token = localStorage.getItem('token');\n            api\n            .getUserInfoMe(token)\n            .then((res) => {\n                if(res) {\n                    setCurrentUser(res);\n                }\n                    \n            })\n            .catch(err=>console.log(err));\n                \n            api\n            .getInitialCards(token) \n            .then((res) => {\n                if(res) {\n                    setCards(res);\n                }   \n            })\n            .catch(err=>console.log(err));                         \n        }   \n    }, [loggedIn])\n\n    function handleLogin() {\n        setLoggedIn(true);\n    }\n\n    function handleEditAvatarClick() {\n        setIsEditAvatarPopupOpen(true);\n    }\n\n    function handleEditProfileClick() {\n        setIsEditProfilePopupOpen(true);\n    }\n\n    function handleAddPlaceClick() {\n        setIsAddPlacePopupOpen(true);\n    }\n\n    function handleInfoTooltipClick() {\n        setInfoTooltipOpen(true);\n    }\n\n    function handleCardClick(card) {\n        setPopupImageOpen(true)\n        setSelectedCard(card)\n    }\n\n    function closeAllPopups() {\n        setIsEditAvatarPopupOpen(false);\n        setIsEditProfilePopupOpen(false);\n        setIsAddPlacePopupOpen(false);\n        setPopupImageOpen(false)\n        setInfoTooltipOpen(false)\n    }\n\n    function handleOverlayClose(evt) {\n        if(evt.target === evt.currentTarget) {\n            closeAllPopups()\n        }\n    }\n\n    React.useEffect(() => {\n        function handleEscClose(evt) {\n            if(evt.key === 'Escape') {\n                closeAllPopups()\n                console.log('esc')\n            }\n        }\n        document.addEventListener('keydown', handleEscClose);\n        return () => {\n            document.removeEventListener('keydown', handleEscClose)\n        }\n    })\n    \n    function handleCardLike(card) {\n        // Снова проверяем, есть ли уже лайк на этой карточке\n        const isLiked = card.likes.some(i => i === currentUser._id);\n        // Отправляем запрос в API и получаем обновлённые данные карточки\n        api.changeLikeCardStatus(card._id, !isLiked)\n        .then((newCard) => {\n            setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n        })\n        .catch(err=>console.log(err));\n    }\n\n    function handleDeleteCard(card) {\n        api.delCard(card._id)\n        .then(() => {\n            setCards((state) => state.filter((c) => c._id !== card._id)\n        )})\n        .catch(err=>console.log(err))\n    }\n\n    function handleUpdateUser(data) {\n        api.changeUserInfo(data)\n        .then((data) => {\n            setCurrentUser(data)\n            closeAllPopups()\n        })\n        .catch(err=>console.log(err))\n    }\n\n    function handleUpdateAvatar(data) {\n        api.editAvatar(data)\n        .then((data) => {\n            setCurrentUser(data)\n            closeAllPopups()\n        }) \n        .catch(err=>console.log(err))\n    }\n\n    function handleAddPlaceSubmit(data) {\n        api.postNewCard(data)\n        .then((data) => {\n            setCards([data, ...cards])\n            closeAllPopups()\n        })\n        .catch(err=>console.log(err))\n    }\n\n    function signOut() {\n        localStorage.removeItem('token');\n        setLoggedIn(false);\n        history.push('/sign-in');\n    }\n\n    \n\n                // REGISTRATION //\n    function handleRegisterSubmit(password, email) {\n        auth\n        .register(password, email)\n        .then((res) => {\n            if(res) {\n                history.push('/sign-in')\n                setInfoTooltipOpen(true)\n                setResSuccess(true)\n                setMessage('');\n            } \n        })\n        .catch((err) => {\n            setInfoTooltipOpen(true)\n            setResSuccess(false)\n            if(err === 400) {\n            setMessage('*Некорректно заполнено одно из полей')\n            } \n        }) \n    }\n                 // LOGIN //\n    function handleLoginSubmit(password, email) {\n        auth\n        .authorize(password, email)\n        .then((data) => {\n            if(data.token) {\n                handleLogin();\n                history.push('/'); \n            }\n        })\n        .catch((err) => {\n            if(err === 400) {\n                console.log('*Не передано одно из полей')\n            } \n            if(err === 401) {\n                console.log('*Пользователь с email не найден')\n            }    \n        })\n    }\n\n    // Проверяем TOKEN //\n    React.useEffect(() => {\n        function checkToken() {\n            const token = localStorage.getItem('token'); \n                if(token) {\n                    auth\n                    .getContent(token)\n                    .then((res) => {\n                        if(res) { \n                            setEmail(res.email)\n                            handleLogin();\n                            history.push('/')\n                        }\n                    })\n                    .catch((err) => {\n                        if(err === 401) {\n                            console.log('*Токен не передан или передан не в том формате')\n                        }\n                        if(err === 401) {\n                            console.log('*Переданный токен некорректен')\n                        }\n                    })\n                }\n        } checkToken();\n    }, [ loggedIn, history ]);\n\n\n    return (\n    <>\n        <div className=\"page\">\n            <CurrentUserContext.Provider value={currentUser}>\n                <Header email={email} onSignOut={signOut} />  \n                    <Switch>\n                        <ProtectedRoute \n                            exact path=\"/\"\n                            onEditProfile={handleEditProfileClick}\n                            onAddPlace={handleAddPlaceClick}\n                            onEditAvatar={handleEditAvatarClick}\n                            onCardClick={handleCardClick}\n                            cards={cards}\n                            onCardLike={handleCardLike}\n                            onCardDelete={handleDeleteCard}\n                            loggedIn={loggedIn}\n                            component={Main}\n                        /> \n\n                        <Route path=\"/sign-up\">\n                            <Register onRegister={handleRegisterSubmit} />\n                        </Route>\n                        <Route path=\"/sign-in\">\n                            <Login onLogin={handleLoginSubmit} />\n                        </Route>\n                        <Route>\n                            {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\n                        </Route>\n                        \n                    </Switch>\n                \n                <Footer />\n\n                <EditProfilePopup \n                isOpen={isEditProfilePopupOpen} \n                onClose={closeAllPopups} \n                onOverlayClose={handleOverlayClose} \n                onUpdateUser={handleUpdateUser}>\n                </EditProfilePopup>\n\n                <EditAvatarPopup \n                isOpen={isEditAvatarPopupOpen} \n                onClose={closeAllPopups} \n                onOverlayClose={handleOverlayClose} \n                onUpdateAvatar={handleUpdateAvatar}>\n                </EditAvatarPopup>\n\n                <AddPlacePopup \n                isOpen={isAddPlacePopupOpen} \n                onClose={closeAllPopups} \n                onOverlayClose={handleOverlayClose} \n                onAddCard={handleAddPlaceSubmit}>\n                </AddPlacePopup>\n                    \n                <ImagePopup \n                card={selectedCard} \n                isOpen={isPopupImageOpen} \n                onClose={closeAllPopups} \n                onOverlayClose={handleOverlayClose}\n                /> \n\n                <InfoTooltip \n                isOpen={isInfoTooltipOpen} \n                onClose={closeAllPopups} \n                onOverlayClose={handleOverlayClose} \n                onSign={handleInfoTooltipClick} \n                onResponse={resSuccess}\n                regSuccess='Вы успешно зарегистрировались!'\n                regUnsaccess='Что-то пошло не так... Попробуйте ещё раз'\n                onMessage={message}\n                /> \n\n                <PopupWithForm name=\"delete\" title=\"Вы уверены?\" /* isOpen=\"popup_opened\" *//>\n            </CurrentUserContext.Provider>\n        </div>\n    </>  \n  );\n  \n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom'\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}